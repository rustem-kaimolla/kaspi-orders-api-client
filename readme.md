# Laravel Kaspi orders API

## Общая информация

API для продавцов Kaspi Магазина – программный интерфейс, который предназначен для получения информации о заказах и сопутствующих данных, поступивших через платформу Kaspi Магазина. Данный программный интерфейс соответствует спецификации JSON API. Спецификация описывает процесс взаимодействия клиент серверных систем, построенных на базе формата сообщений JSON и протокола передачи гипертекста (HTTP).

Каждый запрос в систему сопровождается заголовками и набором параметров.
Обязательными заголовками являются следующие:
* `Content-Type` – тип тела запроса, соответствующий стандарту MIME. Данный заголовок должен соответствовать зарегистрированному значению application/vnd.api+json
* `X-Auth-Token` – токен авторизации. Уникальный идентификатор, позволяющий получить доступ к программному интерфейсу. Сгенерировать токен авторизации можно самостоятельно через личный кабинет. Подробнее по ссылке. На данный момент, однажды полученный идентификатор не меняется с течением времени, однако процесс инвалидации может поменяться.

Набор параметров, передаваемых с запросом, может отличаться. Параметры бывают двух типов: обязательные и необязательные. Помимо этого, параметры отличаются по способу модификации извлекаемых данных:
* Сортировка – описывается с помощью ключевого слова sort и поля, по которому выполняется сортировка. Например: sort=age, что указывает на то, что сортировка будет выполнена по полю age, в восходящем порядке.
* Построчный вывод – описывается с помощью ключевого слова page и дополнительного параметра. Например: page[number]=1 и page[size]=20, будут указывать на извлечение первой страницы результатов, где каждая страница содержит 20 значений.
* Фильтрация – указывается с помощью ключевого слова filter, сущности и поля подвергающихся фильтрации. Например: filter[orders][status]=COMPLETED означает, что будут выбраны все значения сущности orders, у которых поле статуса будет соответствовать значению COMPLETED. Помимо этого, фильтры поддерживают опциональные операторы:
* `$lt`– (lower than) извлекает значения, которые меньше, чем указанное в фильтре;
* `$gt`– (greater than) извлекает значения, которые больше, чем указанное в фильтре;
* `$le`– (lower or equal to) извлекает значения, которые меньше, или равны указанному в фильтре;
* `$ge`– (greater or equal to) извлекает значения, которые больше, или равны указанному в фильтре.

Пример использования фильтра с оператором: filter[orders][creationDate][$ge]=1478736000000 и filter[orders][creationDate][$le]=1479945600000 означает, что дата создания заказа будет больше, или равна 10 ноября 2016 года, либо меньше или равна 24 ноября 2016 года. Значения фильтра указываются в миллисекундах по Timestamp.
Все даты указываются в часовом поясе Алматы.
Важно учесть, что набор параметров, передаваемый с каждым запросом, может отличаться, и сервис не гарантирует поддержку сортировки, фильтрации и постраничного вывода в случаях, не описанных в данной документации.

Ответ на запрос может содержать следующие объекты:
*  `data` – массив сущностей, удовлетворяющих параметрам запроса.

В свою очередь, каждая из сущностей, содержит следующие подобъекты:
* `type` – строковое обозначение извлечённой сущности.
* `id` – строковый идентификатор сущности.
* `attributes` – объект, со всеми атрибутами сущности.
* `relationships` – объект, со всеми отношениями сущности. Отношения могут указывать либо на множество объектов, входящих в состав текущей сущности, либо на один объект.
* `links` – дополнительные ссылки.
* `included` – включённые в запрос подсущности. Выбранную подсущность можно указать с помощью параметра include. Например: include[orders]=user, говорит о том, что сущность user, входящая в состав сущности orders, будет включена в результаты выполнения запроса.
* `meta` – мета информация. Например, количество страниц в запросе, или общее количество результатов.

Эндпойнты
1. [x] Получение списка заказов
2. [ ] Получение состава заказа по коду 
3. [ ] Получение состава заказа 
4. [ ] Получение подпункта заказа 
5. [ ] Получение точки продаж из подпункта заказа 
6. [ ] Получение точки продаж 
7. [ ] Получение продукта из подпункта заказа 
8. [ ] Получение продукта продавца из подпункта заказа 
9. [ ] Получение продукта 
10. [ ] Получение города из точки продаж 
11. [ ] Получение списка городов